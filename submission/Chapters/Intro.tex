\chapter{Introduction}

\label{chapter:introduction}



%--------------------------------------------

\section{Motivation}
Not much time has passed since Edward Snowden revealed the plans that a certain intelligence agency has for the internet. While the world had always been suspecting that the various 3-letter agencies had the capability of controlling the network at a large scale, everybody was shocked with the confirmation of those suspicions.

In a world where the need for easy instant communication must overcome the threat of constant surveillance, end-to-end encryption has become a necessity. It's not a coincidence that digital privacy has come into focus during the last years. One after another companies advertise the utilization of encryption in their products. Apparently, Instant Messaging is the most favorable means of communication when it comes to end-to-end encryption.

One of the oldest and commonly used protocols that provides privacy in Instant Messaging is the Off-The-Record (OTR). OTR was initially introduced in a paper named "Off-the-Record Communication, or, Why Not To Use PGP" in 2004 \cite{otr} and later improved in \cite{otr_improvedauth}. It was named after the homonymous method of journal sourcing. The primary motivation behind OTR was to provide deniable authentication for the conversation participants while keeping conversations confidential, as in real-life private conversations. The protocol is implemented as a C library and a Pidgin plugin, a user study of which can be found in \cite{otr_userstudy}.

Unfortunately, OTR does only apply in a two-party setting, where only two participants are exchanging messages. However, multi-party chat rooms are also very prominent in everyday communications. A protocol providing the same privacy properties as OTR in a multi-party setting was theoritically described in the "Multi-party Off-the-Record Messaging" paper by I. Goldberg et al. in 2009 \cite{mpotr}. This protocol is called multi-party OTR (mpOTR). Although it's been around since 2009, no actual implementation of mpOTR existed until now.

\section{Our Contributions}
The existing theoretical introduction of mpOTR protocol in \cite{mpotr} treats the underlying subrotocols as black boxes and does not describe them in detail. More specifically, two underlying subprotocols are left unspecified, namely the deniable Authenticated Key Exchange (denAKE) and the Group Key Agreement (GKA). These sub-protocols play a key role in setting up the parameters needed for authentication and encryption.

We propose a full construction for the mpOTR Protocol. We specify every underlying sub-protocol. We also specify all the primitive algorithms used for several cryptographic functions, such as hashing, signing and encrypting. Finally, we propose a detailed low-level description of the protocol, including message structures, encoding, etc.

In addition, we provide the first implementation of mpOTR. Our implementation is a production-grade extension of the existing OTR library accompanied by a pidgin plugin, all writen in C. Both are open source projects, available in our github repositories\footnote{https://github.com/Mandragorian/libotr}\footnote{https://github.com/Mandragorian/pidgin\_otr}. We engineered our implementation in such a way that its security is easily reviewable, and, at the same time, facilitates the free software development model, where contributions in the source code are made from several independent authors.

\section{Outline}
In Chapter \ref{chapter:theoretic_background} we introduce some basic theoretic background. All the concepts, cryptographic primitives, and ideas presented there are essential building blocks of the mpOTR Protocol construction proposed in this thesis.

In Chapter \ref{chapter:threat_model} we specify the threat model of the mpOTR Protocol. We describe the different types of adversaries along with their goals. Then, we describe the goals of the mpOTR Protocol to achieve security against each type of adversary.

In Chapter \ref{chapter:protocol} we present our mpOTR Protocol construction. First, we specify the desirable privacy properties of mpOTR conversations and the underlying network setting. Then, we present a high-level overview of the protocol followed by a detailed description of every building block. Afterwards, we specify several technical details. Finally, we specify the exact structure of the messages exchanged in mpOTR.

In Chapter \ref{chapter:implementation} we present our actual implementation of mpOTR. We introduce  several design challenges and the relevant decisions. Then we present the design model of the mpOTR library. Finally, we specify the Application Programming Interface that our implementation offers to the IM applications in order to utilize mpOTR in group conversations.

In Chapter \ref{chapter:plugin} we present our modifications of the OTR pidgin plugin. We introduce the Graphical User interface and the workflow of a private group conversation.

In Chapter \ref{chapter:related_work} we present other protocols that utilize end-to-end encrpytion in multi-party context.

In Chapter \ref{chapter:future_work} we present several problems regarding specific parts of our mpOTR construction. While our construction is fully functional and secure, solving these problems would enhance the protocolâ€™s privacy and/or usabilty. We fully describe each of them and suggest possible solutions.